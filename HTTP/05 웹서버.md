# 05. 웹 서버

웹 서버는 WWW의 일꾼이다. 매일 수십억 개의 웹페이지를 쏟아낸다.

## 5.1 다채로운 웹 서버

모든 웹 서버는 리소스에 대한 HTTP 요청을 받아서 콘텐츠를 클라이언트에게 돌려준다.

웹 서버와 운영체제 (역할)

- 웹 서버: HTTP 프로토콜을 구현하고, 웹 리소스를 관리하고, 웹 서버 관리 기능을 제공한다. TCP 커넥션에 대한 책임을 운영체제와 나눠 갖는다.
- 운영체제: 컴퓨터 시스템의 하드웨어를 관리하고, TCP/IP 네트워크 지원, 웹 리소스를 유지하기 위한 파일 시스템, 현재 연산 활동을 제어하기 위한 프로세스 관리를 제공

## 5.2 간단한 펄 웹 서버

완전한 기능의 HTTP 서버 구현은 어렵지만, 최소한의 기능을 제공한다면 30줄 이하의 펄(Pear) 코드로도 만들 수 있다.

## 5.3 진짜 웹 서버가 하는 일

![IMG_9424](/Users/mina/Downloads/IMG_9424.jpg)

1. 커넥션을 맺는다
   클라이언트의 접속을 받아들이거나, 원치 않는 클라이언트라면 닫는다.
2. 요청을 받는다
   HTTP 요청 메시지를 네트워크로부터 읽어 들인다. 웹 서버는 네트워크 커넥션에서 그 데이터를 읽어들이고 파싱하여 요청 메시지를 구성한다. 
3. 요청을 처리한다
   요청 메시지를 해석하고 행동을 취한다. 서버는 요청으로부터 메서드, 리소스, 헤더, 본문을 확인 후 처리한다.
4. 리소스에 접근한다 (리소스의 매핑과 접근)
   메시지에서 지정한 리소스에 접근한다. 웹 서버는 리소스 서버다.
5. 응답을 만든다
   올바른 헤더를 포함한 HTTP 응답 메시지를 생성한다. 응답 메시지는 응답 상태 코드, 응답 헤더, 그리고 응답 본문을 포함한다.
6. 응답을 보낸다 (커넥션 상태를 추적하여 닫을지, 열린 상태를 유지할지 결정)
   응답을 클라이언트에게 돌려준다.
7. 트랜잭션을 로그로 남긴다
   로그파일에 트랜잭션 완료에 대한 기록을 남긴다.